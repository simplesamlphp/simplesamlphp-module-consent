{% set pagetitle = 'Consent about releasing personal information'|trans %}
{% extends "base.twig" %}

{% block preload %}
<link rel="stylesheet" href="{{ asset('css/consent.css', 'consent') }}">
{% endblock %}

{% block content %}
<p>{{ '%SPNAME% requires that the information below is transferred.'|trans({'%SPNAME%': dstName}) }}</p>

{% if consent_purpose is defined %}
    <p>{{ 'The purpose of %SPNAME% is %SPDESC%'|trans({'%SPNAME%': dstName, '%SPDESC%': dstDesc}) }}</p>
{% endif %}

<form id="consent_yes" action="{{ moduleURL('consent/getconsent') }}" method="GET">
    {% if usestorage == true %}
    <input type="checkbox" name="saveconsent"{% if checked %} checked="checked"{% endif %} value="1" />
    {{ 'Remember'|trans }}
    {% endif %}

    <input type="hidden" name="StateId" value="{{ stateId }}" />
    <button type="submit" name="yes" class="btn" id="yesbutton"{%- if autofocus is defined and autofocus == 'yesbutton' %} autofocus{% endif -%}>{{ 'Yes, continue'|trans }}</button>
</form>

<form id="consent_no" action="{{ moduleURL('consent/noconsent') }}" method="GET">
    <input type="hidden" name="StateId" value="{{ stateId }}" />
    <button type="submit" class="btn" name="no" id="nobutton"{%- if autofocus is defined and autofocus == 'nobutton' %} autofocus{% endif -%}>{{ 'No, cancel'|trans }}</button>
</form>

{% if sppp != false %}
<p>{{ 'Privacy policy for the service'|trans }}
    <a target='_blank' href='{{ sppp|escape('html') }} '>{{ dstName }}</a>
</p>
{% endif %}

<h3 id="attributeheader">{{ 'Information that will be sent to %SPNAME%'|trans({'%SPNAME%': dstName}) }}</h3>

{% set items = attributes %}

{% embed '_table.twig' -%}

    {% block namecol -%}
    {% set translated = name|trans %}
    <td class="attrname">{% if translated != name %} {{ translated }} <br>{% endif %} <samp>{{ name }}</samp></td>
    {% endblock %}


    {% block value -%}
    {% if name =='jpegPhoto'-%}
        <img src="data:image/jpeg;base64,{{ value }}" />
    {% else %}{{ value }}{% endif -%}
    {% endblock %}

{%- endembed %}

{% endblock %}
